{% extends 'base.html' %}
{% load static %}

{% block title %}Головна - Mela-Med Aesthetic{% endblock %}

{% block content %}
<!-- Hero секция -->
<section class="hero">
    <div class="container">
        <h1>Преобразіть свою шкіру за допомогою наших професійних послуг</h1>
        <p>Пропонуємо найновіші технології та преміальну косметику для сяючої й здорової шкіри</p>
        <a href="/procedures/" class="btn btn-primary">Записатися на консультацію</a>
    </div>
</section>

<div class="container">
    <!-- Сертификаты -->
    <section style="margin-bottom: 60px;">
        <h2 class="section-title">Наші сертифікати</h2>
        <p class="section-subtitle">Ми пишаємося визнанням нашої роботи в професійній спільноті</p>
        
        <div class="certificates-slider">
            {% for certificate in certificates %}
            <div class="certificate-slide {% if forloop.first %}active{% endif %} {% if not certificate.image %}no-image{% endif %}"
                 {% if certificate.image %}style="background-image: url('{{ certificate.image.url }}')"{% endif %}></div>
            {% endfor %}
        </div>
        
        <div class="slider-controls">
            {% for certificate in certificates %}
            <button class="slider-btn {% if forloop.first %}active{% endif %}" data-slide="{{ forloop.counter0 }}"></button>
            {% endfor %}
        </div>
    </section>
    
    <!-- Каталог услуг -->
    <section style="margin-bottom: 60px;">
        <div class="grid-2">
            <div class="card">
                <div class="card-img" style="background-image: url('{% static "img/procedures.jpg" %}')"></div>
                <div class="card-body">
                    <h3 class="card-title">Косметологічні процедури</h3>
                    <p class="card-text">Сучасні методики догляду за шкірою від провідних спеціалістів</p>
                    <a href="/procedures/" class="btn">Детальніше</a>
                </div>
            </div>
            
            <div class="card">
                <div class="card-img" style="background-image: url('{% static "img/cosmetics.jpg" %}')"></div>
                <div class="card-body">
                    <h3 class="card-title">Преміальна косметика</h3>
                    <p class="card-text">Продукція від світових лідерів індустрії краси</p>
                    <a href="/cosmetics/" class="btn">Детальніше</a>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Отзывы -->
    <section>
        <h2 class="section-title">Відгуки наших клієнтів</h2>
        <p class="section-subtitle">Ваша довіра — наша головна нагорода</p>
        
        <div class="grid-2">
            {% for review in reviews %}
            <div class="card">
                <div class="card-body">
                    <div style="display: flex; align-items: center; margin-bottom: 20px;">
                        <div class="{% if not review.image %}no-image{% endif %}"
                             style="width: 70px; height: 70px; border-radius: 50%; {% if review.image %}background-image: url('{{ review.image.url }}'); background-size: cover;{% endif %} margin-right: 15px;"></div>
                        <div>
                            <h4 style="font-size: 1.2rem; margin-bottom: 5px;">{{ review.author_name }}</h4>
                            <div style="color: var(--accent);">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        </div>
                    </div>
                    <p class="card-text" style="font-style: italic;">"{{ review.text }}"</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>
</div>

<style>
.certificates-slider {
    position: relative;
    max-width: 900px;
    margin: 0 auto 20px;
    height: 450px;
    border-radius: var(--radius);
    overflow: hidden;
    box-shadow: var(--shadow);
}

.certificate-slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    opacity: 0;
    transition: opacity 0.5s ease;
}

.certificate-slide.active {
    opacity: 1;
}

.slider-controls {
    display: flex;
    justify-content: center;
    gap: 10px;
}

.slider-btn {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--secondary);
    border: none;
    cursor: pointer;
    transition: all 0.3s;
}

.slider-btn:hover,
.slider-btn.active {
    background: var(--accent);
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const slides = document.querySelectorAll('.certificate-slide');
    const dots = document.querySelectorAll('.slider-btn');
    let currentSlide = 0;
    let interval;
    
    function showSlide(n) {
        slides.forEach(slide => slide.classList.remove('active'));
        dots.forEach(dot => dot.classList.remove('active'));
        
        currentSlide = (n + slides.length) % slides.length;
        slides[currentSlide].classList.add('active');
        dots[currentSlide].classList.add('active');
    }
    
    function nextSlide() {
        showSlide(currentSlide + 1);
    }
    
    function startAutoplay() {
        interval = setInterval(nextSlide, 4000);
    }
    
    function stopAutoplay() {
        clearInterval(interval);
    }
    
    dots.forEach((dot, idx) => {
        dot.addEventListener('click', () => {
            stopAutoplay();
            showSlide(idx);
            startAutoplay();
        });
    });
    
    if (slides.length > 1) {
        startAutoplay();
    }
});
</script>
{% endblock %}
